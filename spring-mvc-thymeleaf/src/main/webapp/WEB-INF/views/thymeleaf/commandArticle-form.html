<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Spring Web MVC Thymeleaf Hello World Example</title>

    <!-- Boostrap core css -->
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.2.0/css/bootstrap.min.css}"/>

    <!-- custom style -->
    <link rel="stylesheet" th:href="@{/css/main.css}"/>

</head>

<body>

<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
    <a class="navbar-brand" href="#" >ORDER CRAFT</a>&nbsp;&nbsp;
    <a th:href="@{/customer/showForm}" style="text-decoration: none;">Ajouter Client</a>&nbsp;&nbsp;
    <a th:href="@{/customer/showFormArticle}" style="text-decoration: none;">Ajouter Article</a>&nbsp;&nbsp;
    <a th:href="@{/customer/list}" style="text-decoration: none;">Ajouter Commande</a>&nbsp;&nbsp;
    <a th:href="@{/customer/search}" style="text-decoration: none;">La liste des clients</a>&nbsp;&nbsp;
    <a th:href="@{/customer/searchArticle}" style="text-decoration: none;">La liste des articles</a>
</nav>

<main role="main" class="container">

    <div class="starter-template">
        <h1>Customer Form</h1>    
    <h2>Formulaire CommandArticle</h2>
    <label>ID du client</label> 
    <h5 th:text="${commandArticle.command.customer.id}"></h5>
     <label>Le nom du client</label> 
    <h5 th:text="${commandArticle.command.customer.lastName}"></h5>
     <label>Le prenom du client</label> 
    <h5 th:text="${commandArticle.command.customer.firstName}"></h5>
     <label>ID de la Commande</label> 
    <h5 th:text="${commandArticle.command.id}"></h5>
     <label>Date de Creation de la Commande</label> 
    <h5 th:text="${commandArticle.command.dateCmd}"></h5>
    <!--  h4 th:text="${command.state}">: status</h4-->
           

    <form th:action="@{/customer/saveCommandArticle}" th:object="${commandArticle}" method="post">
         
          <input type="hidden" th:field="*{command.customer.id}">
           <input type="hidden" th:field="*{command.customer.lastName}">
           <input type="hidden" th:field="*{command.customer.firstName}">
           <input type="hidden" th:field="*{command.id}">
           <input type="hidden" th:field="*{command.dateCmd}">

        <input type="hidden" th:field="*{id}">
        <label for="quantite">Quantite :</label>
        <input type="text" th:field="*{quantity}">
        <br>
        <label for="article">Article :</label>
        <input type="text" th:field="*{article.id}">
       
        <button type="submit">Enregistrer</button>
    </form>
    
    <table class="table">
        <thead>
        <tr>
            <th>Article</th>
            <th>Quantite</th>
            <th>SousTotal</th>
        </tr>
        </thead>
        <tbody>
        <!-- Utilisez Thymeleaf pour itérer sur la liste des produits -->
        <tr th:each="cmdArt : ${commandArticles}">
            <td th:text="${cmdArt.article.libelle}"></td>
            <td th:text="${cmdArt.quantity}"></td>
             <td th:text="${cmdArt.sousTotal}"></td>
           <!-- td><a th:href="@{/customer/passerCommande/{id}(id=${client.id})}">Passer une commande</a></td-->
            <!-- td><a class="delete" th:href="@{/customer/passerCommande(id=${client.id})}">Passer commande</a></td-->
             <!--  td> <a class="delete" th:href="@{/customer/passerCommande?id=${client.id}}" >Passer commande</a></td-->
                     
        </tr>
        </tbody>
    </table>
    <table >
    <tr>
    <td><h5>Total:&nbsp;</h5>
    </td>
    <td><h5 th:text="${commande.priceTotal}" ></h5></td>
    </tr>
    </table>
    
    


    <a th:href="@{/welcome}">Retour à la liste des clients</a>
        




       
    </div>

</main>
<!-- /.container -->

<!-- Boostrap core js -->
<script type="text/javascript" th:src="@{webjars/bootstrap/5.2.0/js/bootstrap.min.js}"></script>
</body>
</html>